<!DOCTYPE html>
<html>
<head>
    <!-- head definitions go here -->

</head>
<body>
Hello World
<!--<a href="https://bd-testbed.ucsd.edu:8000/brickapi/v1/apps/app1/static/child/me.html">Visit W3Schools</a>-->
<a href="child/me.html">Visit W3Schools</a>
<!-- TODO: How to have those paths relative to the apps' root? -->
<button id="button">button</button>
</body>

<script>
    var params = new URL(document.location).searchParams;
    var token = params.get("token");

    var newElement = document.createElement('p');
    newElement.innerHTML = token;
    // adding a new element at the end of the body
    document.body.appendChild(newElement);

    var button = document.getElementById("button");
    button.addEventListener("click", function () {
        fetch("/brickapi/v1/apps/domains/bldg/api/", {
            headers: {Authorization: 'Bearer ' + token}
        }).then(function (resp) {
            return resp.text();
        }).then(function (text) {
            alert(text);
        });
    });

</script>
</html>
